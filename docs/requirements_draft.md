# 医療的ケア児支援課題管理システム - 要件定義書（下書き）

**最終更新**: 2025-12-24
**ステータス**: Step#2 実現可能性調査中

---

## 1. プロジェクト概要

### 1.1 成果目標
**医療的ケア児支援の課題を構造化・可視化し、自治体職員のExcel管理作業を50%以上削減、課題解決を加速させる課題管理システム**

### 1.2 成功指標

#### 定量的指標
1. **Excel作業時間削減**: 50%以上
2. **MVP完成**: 1月中旬（遅くとも3月末）
3. **課題登録時間**: 5分以内/件
4. **月間アクティブユーザー率**: 80%以上（神奈川県職員）
5. **導入自治体数**: 1年以内に3自治体以上

#### 定性的指標
1. **神奈川県でのデモ成功**: 好評価を得る
2. **直感的なUI**: 非エンジニアが説明なしで使える
3. **課題解決の加速**: 構造化された課題管理が実現
4. **シンプルなデザイン**: Backlogのようなゴチャゴチャ感なし、視認性重視

---

## 2. 開発アプローチ

**究極のMVP（2ページ）で進める**

### MVP範囲
- **ページ1**: 課題一覧（テーブル表示、フィルタリング）
- **ページ2**: 課題詳細（登録・編集・削除）
- **認証**: 後回し（まずは公開ページで動作確認）
- **Excelインポート**: Phase 2で実装（MVP段階では手動登録のみ）

### 将来拡張（Phase 2以降）
- ガントチャート表示
- 課題の統合・分解機能
- Excelインポート/エクスポート
- ユーザー認証・権限管理
- コメント機能

---

## 3. 解決する課題

### 現状の問題点
1. **Excel管理の限界**
   - セル結合による構造破壊
   - 手作業での統合・分解
   - バージョン管理の困難さ
   - 複数人同時編集の不可

2. **進捗の不可視化**
   - 課題の優先順位が不明確
   - 対応状況が把握しづらい
   - 期限管理ができない

3. **情報共有の非効率**
   - 会議資料の作成に時間がかかる
   - 最新情報の把握が困難
   - 担当者間の連携不足

---

## 4. 主要機能（MVP範囲）

### 4.1 課題登録機能
- 項目（カテゴリ）選択
  - ３ 成人移行
  - ４ レスパイト
  - ５ 福祉サービス
  - ８ 保育園・幼稚園
  - ９ 学校
  - 10 在宅生活
  - 11 その他

### 4.2 課題の属性
- 項番（自動採番）
- 問題点（必須）
- 原因（複数登録可）
- 対応案（複数登録可）
- 進捗ステータス（未着手 / 進行中 / 完了）
- 対応者（複数選択可）
- 期限
- 関連事業
- 事業内容
- 該当所属

### 4.3 課題一覧表示
- テーブル形式で全課題を表示
- フィルタリング機能
  - 項目（カテゴリ）別
  - 進捗ステータス別
  - 対応者別
- ソート機能（項番、期限、ステータス等）

### 4.4 課題詳細画面
- 課題の全情報を表示
- 編集・削除機能

---

## 5. Step#2: 実現可能性調査結果

### 5.1 React UIライブラリ推奨

**調査結果サマリー:**

| ライブラリ | シンプルさ | カスタマイズ性 | 学習コスト | パフォーマンス | 推奨度 |
|-----------|----------|--------------|----------|--------------|-------|
| shadcn/ui | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | **最推奨** |
| Chakra UI | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | 推奨 |
| MUI v6 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐⭐⭐ | 条件付き |
| Ant Design | ⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | 非推奨 |

**最終推奨: shadcn/ui**
- 理由: 最もシンプル＆クリーン、最高パフォーマンス、完全カスタマイズ可能
- 注意: Tailwind CSS必須

**代替案: Chakra UI**
- 理由: Tailwind不使用の場合、学習コスト最低でシンプル

### 5.2 バックエンドBaaS推奨

**調査結果サマリー:**

| サービス | 無料枠 | PostgreSQL対応 | Vercel連携 | 1年無料運用 | 学習コスト | 推奨度 |
|---------|--------|---------------|-----------|------------|----------|-------|
| **Neon** | ⭐⭐⭐⭐⭐ | ✅ | ⭐⭐⭐⭐⭐ | ✅ | 低 | **最推奨** |
| Appwrite | ⭐⭐⭐⭐ | ✅ | ⭐⭐⭐ | ✅ | 中 | 推奨 |
| Supabase | ⭐⭐⭐ | ✅ | ⭐⭐⭐⭐ | ⚠️ | 中 | 条件付き |
| Firebase | ⭐⭐⭐ | ✅ | ⭐⭐⭐⭐ | ❌ | 中 | 非推奨 |
| PlanetScale | ⭐ | ❌ (MySQL) | ⭐⭐⭐ | ❌ | 低 | 検討外 |

**最終推奨: Neon PostgreSQL**
- 理由:
  - 永続無料枠（0.5GB、24/7稼働可能）
  - Vercel公式統合
  - PostgreSQL完全対応
  - 学習コスト最低
  - 50件程度の課題管理に十分
  - 1年間確実に無料運用可能

**代替案: Appwrite**
- 理由: オールインワンBaaS（認証・ストレージ込み）、無料枠充実

### 5.3 技術的実現可能性

#### ✅ 実現可能な要素
- 課題の登録・編集・削除（CRUD操作）
- PostgreSQLでのリレーショナルデータ管理
- テーブル表示とフィルタリング
- シンプルでクリーンなUI
- Vercelでの無料ホスティング

#### ⚠️ 条件付きで実現可能
- **ガントチャート**: Phase 2で実装（MVPには含まない）
- **統合・分解機能**: Phase 2で実装（MVPには含まない）
- **Excelインポート**: Phase 2で実装（MVPには含まない）

#### ❌ MVP段階では実装困難
- ユーザー認証・権限管理（Phase 2以降）
- コメント機能（Phase 2以降）

---

## 6. データ構造（概念）

### 6.1 課題テーブル（tasks）
```yaml
Task:
  識別子: id (UUID)
  基本情報:
    - task_number: 項番（自動採番）
    - category: 項目（カテゴリ）（必須）
    - problem: 問題点（必須）
    - status: 進捗ステータス（未着手/進行中/完了）
    - deadline: 期限（任意）
    - related_business: 関連事業（任意）
    - business_content: 事業内容（任意）
    - organization: 該当所属（任意）
  メタ情報:
    - created_at: 作成日時
    - updated_at: 更新日時
  関連:
    - causes: 原因（1対多）
    - actions: 対応案（1対多）
    - assignees: 対応者（1対多）
```

### 6.2 原因テーブル（causes）
```yaml
Cause:
  識別子: id (UUID)
  基本情報:
    - task_id: 課題ID（外部キー）
    - cause: 原因（必須）
  メタ情報:
    - created_at: 作成日時
```

### 6.3 対応案テーブル（actions）
```yaml
Action:
  識別子: id (UUID)
  基本情報:
    - task_id: 課題ID（外部キー）
    - action: 対応案（必須）
  メタ情報:
    - created_at: 作成日時
```

### 6.4 対応者テーブル（assignees）
```yaml
Assignee:
  識別子: id (UUID)
  基本情報:
    - task_id: 課題ID（外部キー）
    - name: 氏名（必須）
    - organization: 所属（任意）
  メタ情報:
    - created_at: 作成日時
```

### 6.5 エンティティ関係図
```
Task ─┬─ Cause     （1対多）
      ├─ Action    （1対多）
      └─ Assignee  （1対多）
```

---

## 7. 必要な外部サービス・アカウント

### 必須サービス（MVP）
| サービス名 | 用途 | 取得先 | 備考 |
|-----------|------|--------|------|
| Neon | PostgreSQLデータベース | https://neon.tech | 無料枠: 0.5GB、24/7稼働 |
| Vercel | フロントエンドホスティング | https://vercel.com | 無料枠: 無制限デプロイ |

### オプションサービス（Phase 2以降）
| サービス名 | 用途 | 取得先 | 備考 |
|-----------|------|--------|------|
| Clerk / Auth.js | 認証機能 | https://clerk.com | Phase 2で検討 |

---

## 8. 開発フェーズ

### Phase 1: MVP（1-2週間）
**目標**: 基本的な課題管理機能を実装

**機能**
- 課題の登録・編集・削除
- 課題一覧表示（テーブル）
- 項目（カテゴリ）別フィルタリング

**成果物**
- デモ可能なプロトタイプ
- 神奈川県へのプレゼン資料

### Phase 2: 機能拡張（2-3週間）
**機能**
- ガントチャート表示
- 課題の統合・分解機能
- Excelインポート/エクスポート

### Phase 3: 本格運用（継続）
**機能**
- ユーザー認証・権限管理
- コメント機能
- 通知機能

---

## 9. UI/UXの方針

### デザイン原則
- **とにかくシンプル**: Backlogのようなゴチャゴチャ感は不要
- **色使いは抑えめ**: 視認性重視
- **モバイル対応**: 後回し（PC優先）
- **直感的な操作**: 説明なしで使える

---

---

## 10. 技術スタック（最終決定）

### 10.1 フロントエンド
```yaml
フレームワーク: React 18
言語: TypeScript 5
UIライブラリ: shadcn/ui + Tailwind CSS
  理由:
    - 最もシンプル＆クリーン
    - 完全カスタマイズ可能（Tailwindで上書き自由）
    - 最高パフォーマンス
    - コピー&ペースト型でフルコントロール
状態管理: Zustand（軽量グローバル状態管理）
ルーティング: React Router v6
データフェッチ: TanStack Query (React Query)
ビルドツール: Vite 5
フォント: Noto Sans JP / Inter
```

### 10.2 バックエンド
```yaml
データベース: Neon PostgreSQL
  理由:
    - 永続無料枠（0.5GB、24/7稼働）
    - Vercel公式統合
    - PostgreSQL完全対応
    - 学習コスト最低
ORM: Drizzle ORM（TypeScript-first、軽量）
API: REST API（Vercel Serverless Functions）
```

### 10.3 インフラ
```yaml
ホスティング: Vercel
  - フロントエンド: 無料枠（無制限デプロイ）
  - API: Serverless Functions（無料枠）
データベース: Neon PostgreSQL（無料枠）
```

### 10.4 デザインシステム
```yaml
色使い（最大3色）:
  - ベース: 白・グレー系（#FFFFFF, #F3F4F6, #9CA3AF）
  - アクセント: ブルー系（#3B82F6）※進行中の課題
  - 警告: レッド系（#EF4444）※期限切れ
  - 完了: グリーン系（#10B981）※最小限使用
フォント:
  - 和文: Noto Sans JP
  - 英文: Inter
原則: シンプル、視認性重視、Backlog的ゴチャゴチャ感なし
```

---

## 11. 認証・権限設計（MVP段階）

### 11.1 ユーザーロール
**MVP段階では単一ロールのみ**
- **ログインユーザー**: 全員が同じ権限（管理者ロールなし）

### 11.2 認証方式
- メール + パスワード
- メール確認: 不要（MVP簡略化）

### 11.3 権限マトリックス

| 機能/ページ        | ゲスト | ログインユーザー | 備考               |
|--------------------|--------|------------------|--------------------|
| ログインページ     | ○      | ×                | 未ログインのみ     |
| サインアップページ | ○      | ×                | 未ログインのみ     |
| 課題一覧ページ     | ×      | ○                | 要ログイン         |
| 課題詳細ページ     | ×      | ○                | 要ログイン         |
| 課題作成           | ×      | ○                | 要ログイン         |
| 課題編集           | ×      | ○（全員）        | **全員が編集可能** |
| 課題削除           | ×      | ○（全員）        | **全員が削除可能** |

**設計理由:**
- 神奈川県での実務運用を考慮
- 誰かが登録した課題を別の人が編集できる必要がある
- MVP段階では全員が信頼できるメンバー前提
- 削除時の確認ダイアログでミス防止

**将来的な拡張（Phase 2以降）:**
- 管理者ロールの追加
- 編集履歴の記録
- より詳細な権限設定

---

## 12. ページ構成（MVP: 2ページ）

### P-001: 課題一覧ページ（Task List）

**目的**: 全課題を一覧表示し、ステータスと優先度を把握する

**成果達成への貢献**:
Excel管理の混沌から脱却し、課題の全体像を構造化して可視化。フィルタリングで必要な課題を瞬時に抽出。

**主要機能**:
- 課題一覧テーブル表示
  - 列: 項番、項目（カテゴリ）、問題点、進捗ステータス、対応者、期限
- フィルタリング機能
  - 項目（カテゴリ）別
  - 進捗ステータス別
  - 対応者別
- ソート機能（項番、期限、ステータス等）
- 新規課題登録ボタン（→ P-002へ遷移）
- 課題クリックで詳細表示（→ P-002へ遷移）

---

### P-002: 課題詳細ページ（Task Detail）

**目的**: 課題の登録・編集・削除を行い、詳細情報を管理する

**成果達成への貢献**:
5分以内に課題登録完了。複数の原因・対応案を構造化して管理し、Excelのセル結合地獄から解放。

**主要機能**:
- 課題情報の表示・編集
  - 項目（カテゴリ）選択
  - 問題点入力
  - 原因（複数登録可、追加・削除可能）
  - 対応案（複数登録可、追加・削除可能）
  - 進捗ステータス選択
  - 対応者（複数選択可）
  - 期限選択
  - 関連事業、事業内容、該当所属
- 保存ボタン（登録/更新）
- 削除ボタン（確認ダイアログ付き）
- 戻るボタン（→ P-001へ遷移）

---

## 進捗記録
- ✅ Step#1: 成果の精密な特定（完了）
- ✅ Step#2: 実現可能性調査（完了）
  - ✅ React UIライブラリ調査完了
  - ✅ Supabase機能調査完了
  - ✅ 代替BaaS調査完了
- ✅ Step#2.5: 開発アプローチの選択（完了）
- ✅ Step#4: ページリスト作成（完了）
- ✅ Step#5: 技術スタック最終決定（完了）
- ✅ Step#6: 外部API最終決定（完了）
- 🔄 Step#7: 要件定義書の書き出し（次のステップ）
